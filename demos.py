
from utils import get_completion_from_messages
import openai
from dotenv import load_dotenv
import os

load_dotenv(override=True)

def set_openai_key():
    API_KEY = os.getenv("API_KEY")
    openai.api_key = API_KEY

set_openai_key()

def format_text_history_chat(history_chat):
        text = ""
        for message in history_chat:
            text += f'\n{message["role"]}:{message["content"]}'    
        return text

query = "¿Qué pasos debo seguir entonces para poder solicitar esa matricula especial?"

#query = "¿Qué pasos debo seguir para solicitar la inscripción especial de un curso y su pre requisito ?"

history_chat_messages = [
            {
                "role": "user",
                "content": "Hola, \u00bfpuedes ayudarme con informaci\u00f3n sobre f\u00edsica cu\u00e1ntica?"
            },
            {
                "role": "assistant",
                "content": "\u00a1Hola! Claro, puedo ayudarte con informaci\u00f3n sobre f\u00edsica cu\u00e1ntica en el contexto de la Facultad de Ciencias de la UNI. \u00bfEn qu\u00e9 aspecto espec\u00edfico necesitas ayuda o informaci\u00f3n? Estoy aqu\u00ed para asistirte.",
            },
            {
                "role": "user",
                "content": "\u00bfSe permite a los estudiantes inscribirse en un curso y su pre requisito en el mismo ciclo?",
                "context": "\n\nMatricula De Curso Y Su Prerequisito\n\u00bfUn estudiante puede matricularse en un curso y su pre requisito?\nPodr\u00e1n solicitar el beneficio de matricularse en una asignatura y en su asignatura prerequisito en el mismo ciclo, \u00fanicamente aquellos estudiantes que cumplan con la condici\u00f3n de ser un \"estudiante en posibilidad de egresar\". Este t\u00e9rmino se refiere a los alumnos a quienes, en el momento de la matr\u00edcula, les falten como m\u00e1ximo treinta (30) cr\u00e9ditos para completar su Plan de Estudios y poder graduarse de la Universidad. Los estudiantes que cumplan con esta condici\u00f3n y deseen matricularse en un curso y su prerequisito deber\u00e1n comunicarse con su escuela profesional correspondiente con al menos 3 d\u00edas h\u00e1biles de anticipaci\u00f3n a las fechas de matr\u00edcula regular, para que su solicitud sea evaluada y aprobada por el director de la escuela correspondiente.\n\nRequisitos Y Procedimiento Matricula Regular\n\u00bfCuales son los requisitos y el proceso de matr\u00edcula regular al ciclo acad\u00e9mico para alumnos regulares de pregrado en la Facultad de Ciencias de la Universidad Nacional de Ingenier\u00eda?\nSon requisitos para la matr\u00edcula regular efectuar el pago por autoseguro estudiantil y no presentar adeudos con su Facultad ya sea econ\u00f3micas, por libros o cualquier otro material de ense\u00f1anza en general. Adem\u00e1s, los alumnos en riesgo acad\u00e9mico deben haber completado la tutor\u00eda obligatoria previa a la matr\u00edcula.\n\nEl proceso para que un alumno de pregrado realice su matr\u00edcula regular al ciclo acad\u00e9mico, es el siguiente:\n1. Generar una orden de pago para el autoseguro estudiantil a trav\u00e9s de la plataforma intranet-alumnos. En esta plataforma, selecciona la opci\u00f3n \"Tr\u00e1mites y Pagos\" para acceder al m\u00f3dulo de pagos (Portal INTRALU). En dicho m\u00f3dulo, selecciona el tr\u00e1mite correspondiente en el men\u00fa desplegable, haz clic en el bot\u00f3n \"Nuevo\" y sigue las indicaciones hasta generar la orden de pago.\n2. Realizar el pago dentro de los plazos establecidos en el calendario de actividades acad\u00e9micos, acerc\u00e1ndose a un sucursal del BCP o atravez de la aplicaci\u00f3n movil del banco.\n3. Luego, en la fecha y turno asignado, el estudiante llevar\u00e1 a cabo a su matr\u00edcula de forma virtual, es decir, realizar\u00e1 la inscripci\u00f3n de sus cursos a trav\u00e9s de la plataforma intranet-alumnos. Acceder\u00e1 al m\u00f3dulo de Matr\u00edcula UNI dentro de esta plataforma, seleccionar\u00e1 las asignaturas y horarios deseados, y finalizar\u00e1 confirmando la matr\u00edcula en todas las asignaturas elegidas en el sistema.\nLos turnos para la matr\u00edcula, son asignados por grupos de acuerdo al promedio ponderado de los \u00faltimos ciclos, en un orden de m\u00e9rito. Cada alumno puede verificar su turno correspondiente dentro de la plataforma intranet-alumnos.\n\nCondiciones Para Matricula En Asignaturas\nCondiciones para la Matricula en Asignaturas\n\nArt. 49\u00b0 El estudiante se matricular\u00e1 s\u00f3lo en las asignaturas que corresponden a su Plan de Estudios de su especialidad. Quien haya solicitado matr\u00edcula en asignaturas de otra especialidad de la UNI, primero har\u00e1 su Matricula ordinaria y reservar\u00e1 cr\u00e9ditos para esas adicionales, las que se registrar\u00e1n mediante oficio ante la DIRCE.\n\nArt. 50\u00b0 La matr\u00edcula en una asignatura procede:\n\t\ta. Si el prerrequisito de la asignatura ha sido aprobado.\n\t\tb. Si se ha solicitado la matr\u00edcula en las asignaturas pendientes de menor ciclo y en riesgo acad\u00e9mico.\n\t\tc. Si no existen cruces entre los horarios de las asignaturas-secci\u00f3n, y de las sesiones si corresponde, registradas en la matr\u00edcula.\n\t\td. Si no existen cruces entre los horarios de pr\u00e1cticas o laboratorios de dos asignatura-secci\u00f3n. De manera excepcional, se aceptan los siguientes cruces de dos asignaturas:\n\t\t\t-\tHasta cuatro (04) horas de cruces de horarios de solo teor\u00eda con teor\u00eda de dos asignatura-secci\u00f3n, siendo las horas no necesariamente consecutivas.\n\t\t\t-\tHasta dos (02) horas de cruces de horario de teor\u00eda con horarios de pr\u00e1ctica o laboratorios, no necesariamente consecutivas.\n\t\t\t-\tHasta dos (02) horas de cruces de horarios de teor\u00eda con horarios de pr\u00e1ctica o laboratorios y hasta dos (02) horas de cruces de horarios de solo teor\u00eda con teor\u00eda, no necesariamente consecutivos.\n\nArt. 54\u00b0 El estudiante que haya aprobado los cinco (05) primeros ciclos de su Plan de Estudios o un n\u00famero de cr\u00e9ditos equivalente a estos, podr\u00e1 matricularse en las asignaturas electivas en las que cumplan con el prerrequisito.\n\t\tPuede considerarse como prerrequisito una determinada cantidad de cr\u00e9ditos aprobados acumulados.\n\nArt. 55\u00b0 El estudiante que haya aprobado el n\u00famero total de cr\u00e9ditos exigidos en el Plan de Estudios de su especialidad, ser\u00e1 considerado autom\u00e1ticamente en la condici\u00f3n de \"Curr\u00edculo completo\" y por ello, eximido de los efectos del Reglamento de Matricula. \n\nArt. 56\u00b0 El estudiante considerado \"Curr\u00edculo Completo\" o que haya tramitado su Constancia de Egresado, podr\u00e1 inscribirse como estudiante libre en cualquier asignatura, abonando los derechos correspondientes al de estudiante libre. A la aprobaci\u00f3n de dichas asignaturas se le podr\u00e1 otorgar un certificado de capacitaci\u00f3n expedido por la Facultad.\n\nEscuelas Profesionales de la Facultad de Ciencias de la UNI\n\nInformaci\u00f3n de Contacto:\nSeg\u00fan la escuela profesional (carrera universitaria), el correo de contacto es el siguiente:\n\nPara F\u00edsica, Qu\u00edmica o Ciencia de la Computaci\u00f3n: escuelas_fc1@uni.edu.pe\nPara Matem\u00e1ticas o Ingenier\u00eda F\u00edsica: escuelas_fc2@uni.edu.pe\n\nHorario de Atenci\u00f3n: De Lunes a Viernes de 8:30 a.m a 4:00 p.m\n\n\u00c1rea de Estad\u00edstica y Registros Acad\u00e9micos de la Facultad de Ciencias de la UNI\n\nInformaci\u00f3n de Contacto de la oficina de estad\u00edstica (AERA)\nE-mail: estadistica_fc@uni.edu.pe\n\nHorario de Atenci\u00f3n de la oficina de estad\u00edstica (AERA):\nDe Lunes a Viernes de 8:00 a.m. a 4:00 p.m.",
                "recovered_texts": [
                    {
                        "text": "Matricula De Curso Y Su Prerequisito\n\u00bfUn estudiante puede matricularse en un curso y su pre requisito?\nPodr\u00e1n solicitar el beneficio de matricularse en una asignatura y en su asignatura prerequisito en el mismo ciclo, \u00fanicamente aquellos estudiantes que cumplan con la condici\u00f3n de ser un \"estudiante en posibilidad de egresar\". Este t\u00e9rmino se refiere a los alumnos a quienes, en el momento de la matr\u00edcula, les falten como m\u00e1ximo treinta (30) cr\u00e9ditos para completar su Plan de Estudios y poder graduarse de la Universidad. Los estudiantes que cumplan con esta condici\u00f3n y deseen matricularse en un curso y su prerequisito deber\u00e1n comunicarse con su escuela profesional correspondiente con al menos 3 d\u00edas h\u00e1biles de anticipaci\u00f3n a las fechas de matr\u00edcula regular, para que su solicitud sea evaluada y aprobada por el director de la escuela correspondiente.",
                        "relatedness": 0.7121046378171828
                    },
                    {
                        "text": "Requisitos Y Procedimiento Matricula Regular\n\u00bfCuales son los requisitos y el proceso de matr\u00edcula regular al ciclo acad\u00e9mico para alumnos regulares de pregrado en la Facultad de Ciencias de la Universidad Nacional de Ingenier\u00eda?\nSon requisitos para la matr\u00edcula regular efectuar el pago por autoseguro estudiantil y no presentar adeudos con su Facultad ya sea econ\u00f3micas, por libros o cualquier otro material de ense\u00f1anza en general. Adem\u00e1s, los alumnos en riesgo acad\u00e9mico deben haber completado la tutor\u00eda obligatoria previa a la matr\u00edcula.\n\nEl proceso para que un alumno de pregrado realice su matr\u00edcula regular al ciclo acad\u00e9mico, es el siguiente:\n1. Generar una orden de pago para el autoseguro estudiantil a trav\u00e9s de la plataforma intranet-alumnos. En esta plataforma, selecciona la opci\u00f3n \"Tr\u00e1mites y Pagos\" para acceder al m\u00f3dulo de pagos (Portal INTRALU). En dicho m\u00f3dulo, selecciona el tr\u00e1mite correspondiente en el men\u00fa desplegable, haz clic en el bot\u00f3n \"Nuevo\" y sigue las indicaciones hasta generar la orden de pago.\n2. Realizar el pago dentro de los plazos establecidos en el calendario de actividades acad\u00e9micos, acerc\u00e1ndose a un sucursal del BCP o atravez de la aplicaci\u00f3n movil del banco.\n3. Luego, en la fecha y turno asignado, el estudiante llevar\u00e1 a cabo a su matr\u00edcula de forma virtual, es decir, realizar\u00e1 la inscripci\u00f3n de sus cursos a trav\u00e9s de la plataforma intranet-alumnos. Acceder\u00e1 al m\u00f3dulo de Matr\u00edcula UNI dentro de esta plataforma, seleccionar\u00e1 las asignaturas y horarios deseados, y finalizar\u00e1 confirmando la matr\u00edcula en todas las asignaturas elegidas en el sistema.\nLos turnos para la matr\u00edcula, son asignados por grupos de acuerdo al promedio ponderado de los \u00faltimos ciclos, en un orden de m\u00e9rito. Cada alumno puede verificar su turno correspondiente dentro de la plataforma intranet-alumnos.",
                        "relatedness": 0.5910702036611953
                    },
                    {
                        "text": "Condiciones Para Matricula En Asignaturas\nCondiciones para la Matricula en Asignaturas\n\nArt. 49\u00b0 El estudiante se matricular\u00e1 s\u00f3lo en las asignaturas que corresponden a su Plan de Estudios de su especialidad. Quien haya solicitado matr\u00edcula en asignaturas de otra especialidad de la UNI, primero har\u00e1 su Matricula ordinaria y reservar\u00e1 cr\u00e9ditos para esas adicionales, las que se registrar\u00e1n mediante oficio ante la DIRCE.\n\nArt. 50\u00b0 La matr\u00edcula en una asignatura procede:\n\t\ta. Si el prerrequisito de la asignatura ha sido aprobado.\n\t\tb. Si se ha solicitado la matr\u00edcula en las asignaturas pendientes de menor ciclo y en riesgo acad\u00e9mico.\n\t\tc. Si no existen cruces entre los horarios de las asignaturas-secci\u00f3n, y de las sesiones si corresponde, registradas en la matr\u00edcula.\n\t\td. Si no existen cruces entre los horarios de pr\u00e1cticas o laboratorios de dos asignatura-secci\u00f3n. De manera excepcional, se aceptan los siguientes cruces de dos asignaturas:\n\t\t\t-\tHasta cuatro (04) horas de cruces de horarios de solo teor\u00eda con teor\u00eda de dos asignatura-secci\u00f3n, siendo las horas no necesariamente consecutivas.\n\t\t\t-\tHasta dos (02) horas de cruces de horario de teor\u00eda con horarios de pr\u00e1ctica o laboratorios, no necesariamente consecutivas.\n\t\t\t-\tHasta dos (02) horas de cruces de horarios de teor\u00eda con horarios de pr\u00e1ctica o laboratorios y hasta dos (02) horas de cruces de horarios de solo teor\u00eda con teor\u00eda, no necesariamente consecutivos.\n\nArt. 54\u00b0 El estudiante que haya aprobado los cinco (05) primeros ciclos de su Plan de Estudios o un n\u00famero de cr\u00e9ditos equivalente a estos, podr\u00e1 matricularse en las asignaturas electivas en las que cumplan con el prerrequisito.\n\t\tPuede considerarse como prerrequisito una determinada cantidad de cr\u00e9ditos aprobados acumulados.\n\nArt. 55\u00b0 El estudiante que haya aprobado el n\u00famero total de cr\u00e9ditos exigidos en el Plan de Estudios de su especialidad, ser\u00e1 considerado autom\u00e1ticamente en la condici\u00f3n de \"Curr\u00edculo completo\" y por ello, eximido de los efectos del Reglamento de Matricula. \n\nArt. 56\u00b0 El estudiante considerado \"Curr\u00edculo Completo\" o que haya tramitado su Constancia de Egresado, podr\u00e1 inscribirse como estudiante libre en cualquier asignatura, abonando los derechos correspondientes al de estudiante libre. A la aprobaci\u00f3n de dichas asignaturas se le podr\u00e1 otorgar un certificado de capacitaci\u00f3n expedido por la Facultad.\n",
                        "relatedness": 0.5417528772613619
                    },
                    {
                        "text": "Requisitos Y Procedimiento Para Matricula De Un Ingresante\n\u00bfCuales son los requisitos y el proceso de matr\u00edcula para nuevos ingresantes de pregrado en la Facultad de Ciencias de la Universidad Nacional de Ingenier\u00eda?\nLos nuevos alumnos de pregrado ingresantes a la Facultad de Ciencias, realizaran el siguiente proceso para completar su matricula (primera matricula al primer ciclo):\n    1. Recabar su constancia de ingreso. Luego de gestionar la emisi\u00f3n de su constancia de ingreso, la Direcci\u00f3n de Admisi\u00f3n (DIAD) de la UNI enviar\u00e1 a su correo la constancia de ingreso.\n    2. Actualizaci\u00f3n de datos en intranet. DIRCE har\u00e1 llegar a su correo su clave para acceder a la plataforma de intranet-alumnos y completar sus datos.\n    3. Registrar los datos en la Facultad de Ciencias. La oficina de estad\u00edstica de la facultad enviar\u00e1 al correo del ingresante la ficha de datos. El llenado es car\u00e1cter obligatorio.\n    4. Efectuar el pago por autoseguro en el plazo establecido en el cronograma. Para ello, primero generar una orden de pago atravez de la plataforma intranet-alumnos.\n    5. Realizar la entrega de los siguientes documentos a la oficina de estad\u00edstica seg\u00fan el cronograma de actividades de matr\u00edcula para ingresantes publicado en la secci\u00f3n 'MATR\u00cdCULA Y PROCEDIMIENTOS' en la p\u00e1gina web de la Facultad de Ciencias.\n        - Constancia de Ingreso\n        - Ficha de datos\n        - Constancia de Evaluaci\u00f3n Socioecon\u00f3mica\n        - Certificado M\u00e9dico expedido por el Centro Medico UNI\n        - Comprobante de pago de Autoseguro Estudiantil\n    6. La oficina de estad\u00edstica ejecutar\u00e1 la matr\u00edcula (inscripci\u00f3n de cursos) de los ingresantes seg\u00fan el cronograma de actividades, \u00fanicamente para aquellos que hayan cumplido con la entrega de la entrega de los documentos requeridos en de las fechas establecidas en el cronograma.\n    7. Los ingresantes matriculados recibir\u00e1n un correo con el horario de sus cursos y tambi\u00e9n podr\u00e1n visualizar sus cursos y horarios en la plataforma intranet-alumnos.",
                        "relatedness": 0.5394354721246584
                    },
                    {
                        "text": "Matricula Preperencial Y Libre\nMATRICULA PREFERENCIAL\n(del Reglamento de Matr\u00edcula Aprobado con R.R. No 0570 del 29.03.2022)\n\nArt 10\u00b0 La matr\u00edcula, por su tratamiento, puede ser:\n(...)\nc. Matr\u00edcula Preferencial. Es la de un grupo previo al primero que est\u00e1 integrado por los estudiantes con un m\u00e1ximo 30 cr\u00e9ditos pendientes para concluir su carrera. Esta ventaja se podr\u00e1 solicitar s\u00f3lo una vez, tambi\u00e9n la es, la del Grupo Cero, consolidado por la Oficina de Tutor\u00eda. Cada estudiante solicitar\u00e1 con anticipaci\u00f3n a su director de Escuela, que lo incluya en dicho grupo. Este listado se cierra tres d\u00edas \u00fatiles antes del inicio de la matr\u00edcula regular; una vez vencido el plazo, este no se admitir\u00e1 \n\n(...)\n\nArt. 42\u00b0 El estudiante que tiene la opci\u00f3n de finalizar sus estudios en el periodo acad\u00e9mico (le falta para finalizar sus estudios 30 o menos cr\u00e9ditos), tendr\u00e1 prioridad en su matr\u00edcula seg\u00fan la programaci\u00f3n de cada facultad. Por ello podr\u00e1 solicitar al Director de Escuela, hasta tres (3) d\u00edas h\u00e1biles antes de la matr\u00edcula ordinaria, ser incluido en el listado de Matr\u00edcula Preferencial.\n\n\nMATRICULA LIBRE\nLa siguiente informaci\u00f3n proviene del REGLAMENTO DE MATR\u00cdCULA PARA ESTUDIANTES DE ANTEGRADO DE LA UNIVERSIDAD NACIONAL DE INGENIER\u00cdA, CAP\u00cdTULO II, CONCEPTOS Y NORMAS DEL PROCESO DE MATR\u00cdCULA, Art. 10\u00b0:\nLa matr\u00edcula, por su tratamiento, puede ser:\n    a. Matr\u00edcula Libre: Aquella que no tiene condicionamientos: asignaturas a cursar por primera o segunda vez.\n    (...)\n\n",
                        "relatedness": 0.5150102920318006
                    },
                    {
                        "text": "Deber Tutor\u00eda Obligatorio Antes De La Matricula O Reincorporaci\u00f3n Para Alumnos En Riego Acad\u00e9mico\n\u00bfQu\u00e9 deben hacer los estudiantes que adeuden la tutor\u00eda obligatoria previa a la matricula para alumnos en riesgo academico?\nLos alumnos en riesgo acad\u00e9mico deben pasar por un proceso de tutor\u00eda obligatoria previa a su matr\u00edcula. Para ello, pueden comunicarse al correo tutor\u00eda.fc@uni.edu.pe o acercarse personalmente a la oficina para obtener m\u00e1s informaci\u00f3n. Este requisito es obligatorio para la habilitaci\u00f3n de su matr\u00edcula.",
                        "relatedness": 0.5142192602013382
                    },
                    {
                        "text": "Numero Creditos A Matricular\nArt. 58\u00b0 El estudiante tiene derecho a elegir matricularse solo en las asignaturas que dentro de su plan de estudios pertenescan a tres ciclos consecutivos, debi\u00e9ndose matricular necesariamente, en las asignaturas obligatorias del ciclo m\u00e1s atrasado y las desaprobadas por dos (02) veces, no pudiendo retirarse de dichas asignaturas. Para este caso, un (01) ciclo completamente aprobado por el estudiante, no cuenta dentro de los tres ciclos consecutivos. Por ejemplo, un estudiante que se encuentra en el tercer ciclo relativo pero no ha completado algunas asignaturas correspondientes al segundo ciclo en su plan de estudios, puede elegir matricularse en cursos que pertenezcan al segundo, tercer y cuarto ciclo en su plan de estudios, pero no en cursos del quinto ciclo. Por ejemplo, un estudiante que se encuentra en el tercer ciclo relativo y ha completado todas las asignaturas correspondientes al segundo ciclo en su plan de estudios, puede elegir matricularse en cursos que pertenezcan al tercer, cuarto y quinto ciclo en su plan de estudios, pero no en cursos del sexto ciclo. Adem\u00e1s, es obligatorio matricularse primero en los cursos del ciclo m\u00e1s atrasado, en este caso, del tercer ciclo. Sin embargo, en otro ejemplo donde el estudiante se encuentra en tercer ciclo relativo pero no ha aprobado todas las asignaturas correspondientes al segundo ciclo en su plan de estudios, podr\u00e1 elegir matricularse en cursos que pertenezcan al segundo, tercer y quinto ciclo, siendo obligatorio matricularse primero en los cursos del segundo ciclo. En ambos casos, si tiene cursos desaprobados por segunda vez, tambi\u00e9n deber\u00e1 matricularse de manera obligatoria en dichos cursos.\nArt. 59\u00b0 Por excepci\u00f3n, la Comisi\u00f3n de Matr\u00edcula permite la matr\u00edcula en las asignaturas que pertenescan a un ciclo consecutivo adicional al tercer ciclo consecutivo ya permitido, a aquellos estudiantes que no completen la cantidad m\u00e1xima de cr\u00e9ditos, establecidos en la Tabla 1, respetando las restricciones del Plan de Estudios y que no tengan asignaturas desaprobadas dos (02) o m\u00e1s veces. Est\u00e1n incursos en la presente excepci\u00f3n los estudiantes que provienen de traslados internos, externos o 2da. profesi\u00f3n, si lo requieren y hasta que logren nivelar el avance de sus estudios. La excepci\u00f3n se repetir\u00e1 , siempre y cuando aprueben las asignaturas de sus dos ciclos m\u00e1s atrasados.\n\nArt. 60\u00b0 El estudiante que a la fecha de la matr\u00edcula le falte a lo m\u00e1s treinta (30) cr\u00e9ditos de su Plan de Estudios para egresar, incluyendo los cr\u00e9ditos por idioma, pr\u00e1cticas pre profesionales y actividades extracurriculares; ser\u00e1 considerado como \"estudiante en posibilidad de egresar\". En esta condici\u00f3n, podr\u00e1 solicitar su inclusi\u00f3n en la Matr\u00edcula Preferencial y se le permitir\u00e1 matr\u00edcula hasta en treinta (30) cr\u00e9ditos, siempre que dentro de este creditaje no exista una asignatura desaprobada dos (02) veces y no le falte la asignaci\u00f3n de los cr\u00e9ditos por pr\u00e1cticas pre- profesionales. Si le faltase esta asignaci\u00f3n, los cr\u00e9ditos se descontar\u00e1n de los 30 cr\u00e9ditos permitidos.",
                        "relatedness": 0.5119699538338572
                    },
                    {
                        "text": "Tipos Matricula Por Tratamiento\n        Para retornar de manera regular a sus estudios en el ciclo siguiente, el estudiante debe haber aprobado la totalidad de las asignaturas desaprobadas por tercera vez y haber cumplido con el proceso de tutor\u00eda.\n        En estos dos (02) casos, la matr\u00edcula de las asignaturas en riesgo se realizar\u00e1 a pedido del Tutor en el Grupo Cero, en la secci\u00f3n de menor demanda. Las otras asignaturas se matricular\u00e1n de modo regular, en el turno que corresponda a cada estudiante; siendo verificada por la Comisi\u00f3n de Matricula correspondiente. El alumno que no se presente dentro del calendario a la tutor\u00eda no podr\u00e1 matricularse.\n    c. Matr\u00edcula Preferencial. Es la de un grupo previo al primero que est\u00e1 integrado por los estudiantes con un m\u00e1ximo 30 cr\u00e9ditos pendientes para concluir su carrera. Esta ventaja se podr\u00e1 solicitar s\u00f3lo una vez, tambi\u00e9n la es, la del Grupo Cero, consolidado por la Oficina de Tutor\u00eda. Cada estudiante solicitar\u00e1 con anticipaci\u00f3n a su Director de Escuela, que lo incluya en dicho grupo. Este listado se cierra tres d\u00edas \u00fatiles antes del inicio de la matr\u00edcula regular; una vez vencido el plazo, este no se admitir\u00e1.\n    d. Matr\u00edcula Especial por Convenio: Es la que corresponde a estudiantes procedentes de intercambio por convenios con universidades nacionales o extranjeras. No requiere se\u00f1alarse el plan de estudios, ni los requisitos. Se autoriza la matr\u00edcula del estudiante mediante Resoluci\u00f3n Decanal dirigida a la ORCE, acompa\u00f1ada de la constancia de ingreso emitida por la Oficina Central de Cooperaci\u00f3n Internacional y Convenios de la UNI. La ORCE genera c\u00f3digo especial de alumno, previo a la matr\u00edcula.",
                        "relatedness": 0.48760476135612496
                    },
                    {
                        "text": "Fechas De Matricula\n\u00bfD\u00f3nde puede un estudiante de pregrado de la Facultad de Ciencias consultar la fecha y turno correspondiente para la matr\u00edcula para el ciclo acad\u00e9mico?\nLas fechas de matr\u00edcula para cada ciclo acad\u00e9mico se encuentran disponibles en el calendario de actividades, el cual se publica en la secci\u00f3n \"Matr\u00edcula y Procedimientos\" p\u00e1gina web de la Facultad de Ciencias, puede ingresar a dicha secci\u00f3n de la pagina en siguiente enlace: https://fc.uni.edu.pe/documentos/.\nLos horarios de matr\u00edcula, conocidos como turnos, son asignados de acuerdo al promedio ponderado de los \u00faltimos ciclos, en un orden de m\u00e9rito. Aquellos estudiantes con los promedios m\u00e1s altos recibir\u00e1n prioridad en los primeros turnos, seguidos por los dem\u00e1s en sucesi\u00f3n. La lista de este orden de m\u00e9rito, junto con los respectivos turnos de matr\u00edcula, se publica en la secci\u00f3n \"Matr\u00edcula y Procedimientos\" de la p\u00e1gina web de la facultad de ciencias para garantizar que todos los alumnos est\u00e9n informados. Adem\u00e1s, cada alumno puede verificar su turno correspondiente dentro de la plataforma intranet-alumnos.",
                        "relatedness": 0.47775037733359216
                    },
                    {
                        "text": "Traslado Interno Requisitos\n\u00bfCu\u00e1les son los requisitos que un estudiante de pregrado de la Facultad de Ciencias debe cumplir para poder realizar un traslado interno?\nPara poder realizar un traslado interno, un estudiante debe cumplir con los siguientes requisitos:\n1. Presentar la solicitud a trav\u00e9s del intranet alumnos/tramites en la fecha indicada en el calendario acad\u00e9mico, adjuntando el comprobante de pago por el concepto de traslado interno y la ficha acad\u00e9mica.\n2. La Escuela verificar\u00e1 los documentos y requisitos propios dentro del primer d\u00eda \u00fatil de presentada la solicitud, registrar\u00e1 el expediente y remitir\u00e1 un correo de recepci\u00f3n al interesado.\n3. El director de Escuela o la Comisi\u00f3n de Matr\u00edcula analizar\u00e1n las solicitudes y, utilizando el formato disponible en la web DIRCE, inscribir\u00e1n las convalidaciones pertinentes seg\u00fan el Avance Curricular del alumno, las notas y las normas de Convalidaci\u00f3n.\n4. Con la autorizaci\u00f3n del director, el expediente ser\u00e1 enviado al Decano y posteriormente presentado ante el Consejo de Facultad para su aprobaci\u00f3n mediante Resoluci\u00f3n Decanal y remisi\u00f3n a la DIRCE.\n5. La DIRCE ejecutar\u00e1 el cambio de especialidad y/o facultad y realizar\u00e1 las convalidaciones.\n6. La Oficina de Estad\u00edstica gestionar\u00e1 la matr\u00edcula de los estudiantes por traslado interno en funci\u00f3n a la solicitud de matr\u00edcula del director de la Escuela Profesional, y finalmente, la DIRCE realizar\u00e1 la ejecuci\u00f3n de la matr\u00edcula en el sistema SIGA.\n7. No se recibir\u00e1n solicitudes extempor\u00e1neas.",
                        "relatedness": 0.4753613010246599
                    }
                ],
                "reformulated_question": "\u00bfSe permite a los estudiantes inscribirse en un curso y su pre requisito en el mismo ciclo?"
            },
            {
                "role": "assistant",
                "content": "S\u00ed, los estudiantes pueden matricularse en un curso y su prerequisito en el mismo ciclo acad\u00e9mico si cumplen con la condici\u00f3n de ser \"estudiantes en posibilidad de egresar\", es decir, les faltan como m\u00e1ximo treinta (30) cr\u00e9ditos para completar su Plan de Estudios y graduarse. Deben comunicarse con su escuela profesional al menos 3 d\u00edas h\u00e1biles antes de las fechas de matr\u00edcula regular para solicitar esta inscripci\u00f3n especial, la cual ser\u00e1 evaluada y aprobada por el director de la escuela correspondiente. \u00a1Espero que esta informaci\u00f3n te sea \u00fatil!",
            }
        ]

history_chat = format_text_history_chat(history_chat_messages)



#print("\nhistory_chat:", history_chat)


history_chat_messages = [
            {
                "role": "user",
                "content": "\u00bfEst\u00e1 permitido que un estudiante se matricule en un curso y su requisito previo simult\u00e1neamente?",
                "context": "\n\nMatricula De Curso Y Su Prerequisito\n\u00bfUn estudiante puede matricularse en un curso y su pre requisito?\nPodr\u00e1n solicitar el beneficio de matricularse en una asignatura y en su asignatura prerequisito en el mismo ciclo, \u00fanicamente aquellos estudiantes que cumplan con la condici\u00f3n de ser un \"estudiante en posibilidad de egresar\". Este t\u00e9rmino se refiere a los alumnos a quienes, en el momento de la matr\u00edcula, les falten como m\u00e1ximo treinta (30) cr\u00e9ditos para completar su Plan de Estudios y poder graduarse de la Universidad. Los estudiantes que cumplan con esta condici\u00f3n y deseen matricularse en un curso y su prerequisito deber\u00e1n comunicarse con su escuela profesional correspondiente con al menos 3 d\u00edas h\u00e1biles de anticipaci\u00f3n a las fechas de matr\u00edcula regular, para que su solicitud sea evaluada y aprobada por el director de la escuela correspondiente.\n\nCondiciones Para Matricula En Asignaturas\nCondiciones para la Matricula en Asignaturas\n\nArt. 49\u00b0 El estudiante se matricular\u00e1 s\u00f3lo en las asignaturas que corresponden a su Plan de Estudios de su especialidad. Quien haya solicitado matr\u00edcula en asignaturas de otra especialidad de la UNI, primero har\u00e1 su Matricula ordinaria y reservar\u00e1 cr\u00e9ditos para esas adicionales, las que se registrar\u00e1n mediante oficio ante la DIRCE.\n\nArt. 50\u00b0 La matr\u00edcula en una asignatura procede:\n\t\ta. Si el prerrequisito de la asignatura ha sido aprobado.\n\t\tb. Si se ha solicitado la matr\u00edcula en las asignaturas pendientes de menor ciclo y en riesgo acad\u00e9mico.\n\t\tc. Si no existen cruces entre los horarios de las asignaturas-secci\u00f3n, y de las sesiones si corresponde, registradas en la matr\u00edcula.\n\t\td. Si no existen cruces entre los horarios de pr\u00e1cticas o laboratorios de dos asignatura-secci\u00f3n. De manera excepcional, se aceptan los siguientes cruces de dos asignaturas:\n\t\t\t-\tHasta cuatro (04) horas de cruces de horarios de solo teor\u00eda con teor\u00eda de dos asignatura-secci\u00f3n, siendo las horas no necesariamente consecutivas.\n\t\t\t-\tHasta dos (02) horas de cruces de horario de teor\u00eda con horarios de pr\u00e1ctica o laboratorios, no necesariamente consecutivas.\n\t\t\t-\tHasta dos (02) horas de cruces de horarios de teor\u00eda con horarios de pr\u00e1ctica o laboratorios y hasta dos (02) horas de cruces de horarios de solo teor\u00eda con teor\u00eda, no necesariamente consecutivos.\n\nArt. 54\u00b0 El estudiante que haya aprobado los cinco (05) primeros ciclos de su Plan de Estudios o un n\u00famero de cr\u00e9ditos equivalente a estos, podr\u00e1 matricularse en las asignaturas electivas en las que cumplan con el prerrequisito.\n\t\tPuede considerarse como prerrequisito una determinada cantidad de cr\u00e9ditos aprobados acumulados.\n\nArt. 55\u00b0 El estudiante que haya aprobado el n\u00famero total de cr\u00e9ditos exigidos en el Plan de Estudios de su especialidad, ser\u00e1 considerado autom\u00e1ticamente en la condici\u00f3n de \"Curr\u00edculo completo\" y por ello, eximido de los efectos del Reglamento de Matricula. \n\nArt. 56\u00b0 El estudiante considerado \"Curr\u00edculo Completo\" o que haya tramitado su Constancia de Egresado, podr\u00e1 inscribirse como estudiante libre en cualquier asignatura, abonando los derechos correspondientes al de estudiante libre. A la aprobaci\u00f3n de dichas asignaturas se le podr\u00e1 otorgar un certificado de capacitaci\u00f3n expedido por la Facultad.\n\n\nDeber Tutor\u00eda Obligatorio Antes De La Matricula O Reincorporaci\u00f3n Para Alumnos En Riego Acad\u00e9mico\n\u00bfQu\u00e9 deben hacer los estudiantes que adeuden la tutor\u00eda obligatoria previa a la matricula para alumnos en riesgo academico?\nLos alumnos en riesgo acad\u00e9mico deben pasar por un proceso de tutor\u00eda obligatoria previa a su matr\u00edcula. Para ello, pueden comunicarse al correo tutor\u00eda.fc@uni.edu.pe o acercarse personalmente a la oficina para obtener m\u00e1s informaci\u00f3n. Este requisito es obligatorio para la habilitaci\u00f3n de su matr\u00edcula.\n\nRequisitos Y Procedimiento Matricula Regular\n\u00bfCuales son los requisitos y el proceso de matr\u00edcula regular al ciclo acad\u00e9mico para alumnos regulares de pregrado en la Facultad de Ciencias de la Universidad Nacional de Ingenier\u00eda?\nSon requisitos para la matr\u00edcula regular efectuar el pago por autoseguro estudiantil y no presentar adeudos con su Facultad ya sea econ\u00f3micas, por libros o cualquier otro material de ense\u00f1anza en general. Adem\u00e1s, los alumnos en riesgo acad\u00e9mico deben haber completado la tutor\u00eda obligatoria previa a la matr\u00edcula.\n\nEl proceso para que un alumno de pregrado realice su matr\u00edcula regular al ciclo acad\u00e9mico, es el siguiente:\n1. Generar una orden de pago para el autoseguro estudiantil a trav\u00e9s de la plataforma intranet-alumnos. En esta plataforma, selecciona la opci\u00f3n \"Tr\u00e1mites y Pagos\" para acceder al m\u00f3dulo de pagos (Portal INTRALU). En dicho m\u00f3dulo, selecciona el tr\u00e1mite correspondiente en el men\u00fa desplegable, haz clic en el bot\u00f3n \"Nuevo\" y sigue las indicaciones hasta generar la orden de pago.\n2. Realizar el pago dentro de los plazos establecidos en el calendario de actividades acad\u00e9micos, acerc\u00e1ndose a un sucursal del BCP o atravez de la aplicaci\u00f3n movil del banco.\n3. Luego, en la fecha y turno asignado, el estudiante llevar\u00e1 a cabo a su matr\u00edcula de forma virtual, es decir, realizar\u00e1 la inscripci\u00f3n de sus cursos a trav\u00e9s de la plataforma intranet-alumnos. Acceder\u00e1 al m\u00f3dulo de Matr\u00edcula UNI dentro de esta plataforma, seleccionar\u00e1 las asignaturas y horarios deseados, y finalizar\u00e1 confirmando la matr\u00edcula en todas las asignaturas elegidas en el sistema.\nLos turnos para la matr\u00edcula, son asignados por grupos de acuerdo al promedio ponderado de los \u00faltimos ciclos, en un orden de m\u00e9rito. Cada alumno puede verificar su turno correspondiente dentro de la plataforma intranet-alumnos.\nEscuelas Profesionales de la Facultad de Ciencias de la UNI\n\nInformaci\u00f3n de Contacto:\nSeg\u00fan la escuela profesional (carrera universitaria), el correo de contacto es el siguiente:\n\nPara F\u00edsica, Qu\u00edmica o Ciencia de la Computaci\u00f3n: escuelas_fc1@uni.edu.pe\nPara Matem\u00e1ticas o Ingenier\u00eda F\u00edsica: escuelas_fc2@uni.edu.pe\n\nHorario de Atenci\u00f3n: De Lunes a Viernes de 8:30 a.m a 4:00 p.m\n\n\u00c1rea de Estad\u00edstica y Registros Acad\u00e9micos de la Facultad de Ciencias de la UNI\n\nInformaci\u00f3n de Contacto de la oficina de estad\u00edstica (AERA)\nE-mail: estadistica_fc@uni.edu.pe\n\nHorario de Atenci\u00f3n de la oficina de estad\u00edstica (AERA):\nDe Lunes a Viernes de 8:00 a.m. a 4:00 p.m.",
                "reformulated_question": "\u00bfEst\u00e1 permitido que un estudiante se matricule en un curso y su requisito previo simult\u00e1neamente?"
            },
            {
                "role": "assistant",
                "content": "Un estudiante puede matricularse en un curso y su prerequisito simult\u00e1neamente solo si es un \"estudiante en posibilidad de egresar\", es decir, le faltan como m\u00e1ximo treinta cr\u00e9ditos para completar su Plan de Estudios y graduarse. Deben comunicarse con su escuela profesional al menos 3 d\u00edas h\u00e1biles antes de la matr\u00edcula regular para solicitar la aprobaci\u00f3n del director correspondiente. Es importante cumplir con esta condici\u00f3n para poder matricularse en un curso y su prerequisito en el mismo ciclo acad\u00e9mico.",
            }
        ]

#history_chat = format_text_history_chat(history_chat_messages)

#query = "\u00bfQu\u00e9 sucede si un estudiante no cumple con el requisito de ser \"estudiante en posibilidad de egresar\" pero necesita matricularse en un curso y su prerequisito simult\u00e1neamente por motivos acad\u00e9micos o personales?"


history_chat_messages = [
            {
                "role": "user",
                "content": "\u00bfPuede un estudiante inscribirse en una asignatura y su pre requisito al mismo tiempo?",
                "context": "\n\nMatricula De Curso Y Su Prerequisito\n\u00bfUn estudiante puede matricularse en un curso y su pre requisito?\nPodr\u00e1n solicitar el beneficio de matricularse en una asignatura y en su asignatura prerequisito en el mismo ciclo, \u00fanicamente aquellos estudiantes que cumplan con la condici\u00f3n de ser un \"estudiante en posibilidad de egresar\". Este t\u00e9rmino se refiere a los alumnos a quienes, en el momento de la matr\u00edcula, les falten como m\u00e1ximo treinta (30) cr\u00e9ditos para completar su Plan de Estudios y poder graduarse de la Universidad. Los estudiantes que cumplan con esta condici\u00f3n y deseen matricularse en un curso y su prerequisito deber\u00e1n comunicarse con su escuela profesional correspondiente con al menos 3 d\u00edas h\u00e1biles de anticipaci\u00f3n a las fechas de matr\u00edcula regular, para que su solicitud sea evaluada y aprobada por el director de la escuela correspondiente.\n\nCondiciones Para Matricula En Asignaturas\nCondiciones para la Matricula en Asignaturas\n\nArt. 49\u00b0 El estudiante se matricular\u00e1 s\u00f3lo en las asignaturas que corresponden a su Plan de Estudios de su especialidad. Quien haya solicitado matr\u00edcula en asignaturas de otra especialidad de la UNI, primero har\u00e1 su Matricula ordinaria y reservar\u00e1 cr\u00e9ditos para esas adicionales, las que se registrar\u00e1n mediante oficio ante la DIRCE.\n\nArt. 50\u00b0 La matr\u00edcula en una asignatura procede:\n\t\ta. Si el prerrequisito de la asignatura ha sido aprobado.\n\t\tb. Si se ha solicitado la matr\u00edcula en las asignaturas pendientes de menor ciclo y en riesgo acad\u00e9mico.\n\t\tc. Si no existen cruces entre los horarios de las asignaturas-secci\u00f3n, y de las sesiones si corresponde, registradas en la matr\u00edcula.\n\t\td. Si no existen cruces entre los horarios de pr\u00e1cticas o laboratorios de dos asignatura-secci\u00f3n. De manera excepcional, se aceptan los siguientes cruces de dos asignaturas:\n\t\t\t-\tHasta cuatro (04) horas de cruces de horarios de solo teor\u00eda con teor\u00eda de dos asignatura-secci\u00f3n, siendo las horas no necesariamente consecutivas.\n\t\t\t-\tHasta dos (02) horas de cruces de horario de teor\u00eda con horarios de pr\u00e1ctica o laboratorios, no necesariamente consecutivas.\n\t\t\t-\tHasta dos (02) horas de cruces de horarios de teor\u00eda con horarios de pr\u00e1ctica o laboratorios y hasta dos (02) horas de cruces de horarios de solo teor\u00eda con teor\u00eda, no necesariamente consecutivos.\n\nArt. 54\u00b0 El estudiante que haya aprobado los cinco (05) primeros ciclos de su Plan de Estudios o un n\u00famero de cr\u00e9ditos equivalente a estos, podr\u00e1 matricularse en las asignaturas electivas en las que cumplan con el prerrequisito.\n\t\tPuede considerarse como prerrequisito una determinada cantidad de cr\u00e9ditos aprobados acumulados.\n\nArt. 55\u00b0 El estudiante que haya aprobado el n\u00famero total de cr\u00e9ditos exigidos en el Plan de Estudios de su especialidad, ser\u00e1 considerado autom\u00e1ticamente en la condici\u00f3n de \"Curr\u00edculo completo\" y por ello, eximido de los efectos del Reglamento de Matricula. \n\nArt. 56\u00b0 El estudiante considerado \"Curr\u00edculo Completo\" o que haya tramitado su Constancia de Egresado, podr\u00e1 inscribirse como estudiante libre en cualquier asignatura, abonando los derechos correspondientes al de estudiante libre. A la aprobaci\u00f3n de dichas asignaturas se le podr\u00e1 otorgar un certificado de capacitaci\u00f3n expedido por la Facultad.\n\n\nRequisitos Y Procedimiento Matricula Regular\n\u00bfCuales son los requisitos y el proceso de matr\u00edcula regular al ciclo acad\u00e9mico para alumnos regulares de pregrado en la Facultad de Ciencias de la Universidad Nacional de Ingenier\u00eda?\nSon requisitos para la matr\u00edcula regular efectuar el pago por autoseguro estudiantil y no presentar adeudos con su Facultad ya sea econ\u00f3micas, por libros o cualquier otro material de ense\u00f1anza en general. Adem\u00e1s, los alumnos en riesgo acad\u00e9mico deben haber completado la tutor\u00eda obligatoria previa a la matr\u00edcula.\n\nEl proceso para que un alumno de pregrado realice su matr\u00edcula regular al ciclo acad\u00e9mico, es el siguiente:\n1. Generar una orden de pago para el autoseguro estudiantil a trav\u00e9s de la plataforma intranet-alumnos. En esta plataforma, selecciona la opci\u00f3n \"Tr\u00e1mites y Pagos\" para acceder al m\u00f3dulo de pagos (Portal INTRALU). En dicho m\u00f3dulo, selecciona el tr\u00e1mite correspondiente en el men\u00fa desplegable, haz clic en el bot\u00f3n \"Nuevo\" y sigue las indicaciones hasta generar la orden de pago.\n2. Realizar el pago dentro de los plazos establecidos en el calendario de actividades acad\u00e9micos, acerc\u00e1ndose a un sucursal del BCP o atravez de la aplicaci\u00f3n movil del banco.\n3. Luego, en la fecha y turno asignado, el estudiante llevar\u00e1 a cabo a su matr\u00edcula de forma virtual, es decir, realizar\u00e1 la inscripci\u00f3n de sus cursos a trav\u00e9s de la plataforma intranet-alumnos. Acceder\u00e1 al m\u00f3dulo de Matr\u00edcula UNI dentro de esta plataforma, seleccionar\u00e1 las asignaturas y horarios deseados, y finalizar\u00e1 confirmando la matr\u00edcula en todas las asignaturas elegidas en el sistema.\nLos turnos para la matr\u00edcula, son asignados por grupos de acuerdo al promedio ponderado de los \u00faltimos ciclos, en un orden de m\u00e9rito. Cada alumno puede verificar su turno correspondiente dentro de la plataforma intranet-alumnos.\n\nDeber Tutor\u00eda Obligatorio Antes De La Matricula O Reincorporaci\u00f3n Para Alumnos En Riego Acad\u00e9mico\n\u00bfQu\u00e9 deben hacer los estudiantes que adeuden la tutor\u00eda obligatoria previa a la matricula para alumnos en riesgo academico?\nLos alumnos en riesgo acad\u00e9mico deben pasar por un proceso de tutor\u00eda obligatoria previa a su matr\u00edcula. Para ello, pueden comunicarse al correo tutor\u00eda.fc@uni.edu.pe o acercarse personalmente a la oficina para obtener m\u00e1s informaci\u00f3n. Este requisito es obligatorio para la habilitaci\u00f3n de su matr\u00edcula.\nEscuelas Profesionales de la Facultad de Ciencias de la UNI\n\nInformaci\u00f3n de Contacto:\nSeg\u00fan la escuela profesional (carrera universitaria), el correo de contacto es el siguiente:\n\nPara F\u00edsica, Qu\u00edmica o Ciencia de la Computaci\u00f3n: escuelas_fc1@uni.edu.pe\nPara Matem\u00e1ticas o Ingenier\u00eda F\u00edsica: escuelas_fc2@uni.edu.pe\n\nHorario de Atenci\u00f3n: De Lunes a Viernes de 8:30 a.m a 4:00 p.m\n\n\u00c1rea de Estad\u00edstica y Registros Acad\u00e9micos de la Facultad de Ciencias de la UNI\n\nInformaci\u00f3n de Contacto de la oficina de estad\u00edstica (AERA)\nE-mail: estadistica_fc@uni.edu.pe\n\nHorario de Atenci\u00f3n de la oficina de estad\u00edstica (AERA):\nDe Lunes a Viernes de 8:00 a.m. a 4:00 p.m.",
            },
            {
                "role": "assistant",
                "content": "Un estudiante puede matricularse en un curso y su prerequisito en el mismo ciclo si es un \"estudiante en posibilidad de egresar\" con menos de 30 cr\u00e9ditos pendientes para completar su Plan de Estudios. Deben comunicarse con su escuela profesional al menos 3 d\u00edas h\u00e1biles antes de la matr\u00edcula regular para solicitar la aprobaci\u00f3n del director correspondiente. Es un proceso sujeto a evaluaci\u00f3n y aprobaci\u00f3n.",
            }
        ]

#history_chat = format_text_history_chat(history_chat_messages)

#query = "\u00a1Genial! Entonces, si soy un \"estudiante en posibilidad de egresar\" con menos de 30 cr\u00e9ditos pendientes, puedo matricularme en un curso y su prerequisito en el mismo ciclo. \u00bfDebo comunicarme con mi escuela profesional para solicitar la aprobaci\u00f3n del director correspondiente, verdad?"

history_chat_messages = [
            {
                "role": "user",
                "content": "Hola, \u00bfpuedes ayudarme con algo?",
                "reformulated_question": "Hola, \u00bfpuedes ayudarme con algo?"
            },
            {
                "role": "assistant",
                "content": "\u00a1Claro que s\u00ed! Estoy aqu\u00ed para ayudarte. \u00bfEn qu\u00e9 puedo asistirte hoy?",
            },
            {
                "role": "user",
                "content": "\u00bfSe permite a los estudiantes inscribirse en un curso y su pre requisito en el mismo ciclo?",
                "context": "\n\nMatricula De Curso Y Su Prerequisito\n\u00bfUn estudiante puede matricularse en un curso y su pre requisito?\nPodr\u00e1n solicitar el beneficio de matricularse en una asignatura y en su asignatura prerequisito en el mismo ciclo, \u00fanicamente aquellos estudiantes que cumplan con la condici\u00f3n de ser un \"estudiante en posibilidad de egresar\". Este t\u00e9rmino se refiere a los alumnos a quienes, en el momento de la matr\u00edcula, les falten como m\u00e1ximo treinta (30) cr\u00e9ditos para completar su Plan de Estudios y poder graduarse de la Universidad. Los estudiantes que cumplan con esta condici\u00f3n y deseen matricularse en un curso y su prerequisito deber\u00e1n comunicarse con su escuela profesional correspondiente con al menos 3 d\u00edas h\u00e1biles de anticipaci\u00f3n a las fechas de matr\u00edcula regular, para que su solicitud sea evaluada y aprobada por el director de la escuela correspondiente.\n\nRequisitos Y Procedimiento Matricula Regular\n\u00bfCuales son los requisitos y el proceso de matr\u00edcula regular al ciclo acad\u00e9mico para alumnos regulares de pregrado en la Facultad de Ciencias de la Universidad Nacional de Ingenier\u00eda?\nSon requisitos para la matr\u00edcula regular efectuar el pago por autoseguro estudiantil y no presentar adeudos con su Facultad ya sea econ\u00f3micas, por libros o cualquier otro material de ense\u00f1anza en general. Adem\u00e1s, los alumnos en riesgo acad\u00e9mico deben haber completado la tutor\u00eda obligatoria previa a la matr\u00edcula.\n\nEl proceso para que un alumno de pregrado realice su matr\u00edcula regular al ciclo acad\u00e9mico, es el siguiente:\n1. Generar una orden de pago para el autoseguro estudiantil a trav\u00e9s de la plataforma intranet-alumnos. En esta plataforma, selecciona la opci\u00f3n \"Tr\u00e1mites y Pagos\" para acceder al m\u00f3dulo de pagos (Portal INTRALU). En dicho m\u00f3dulo, selecciona el tr\u00e1mite correspondiente en el men\u00fa desplegable, haz clic en el bot\u00f3n \"Nuevo\" y sigue las indicaciones hasta generar la orden de pago.\n2. Realizar el pago dentro de los plazos establecidos en el calendario de actividades acad\u00e9micos, acerc\u00e1ndose a un sucursal del BCP o atravez de la aplicaci\u00f3n movil del banco.\n3. Luego, en la fecha y turno asignado, el estudiante llevar\u00e1 a cabo a su matr\u00edcula de forma virtual, es decir, realizar\u00e1 la inscripci\u00f3n de sus cursos a trav\u00e9s de la plataforma intranet-alumnos. Acceder\u00e1 al m\u00f3dulo de Matr\u00edcula UNI dentro de esta plataforma, seleccionar\u00e1 las asignaturas y horarios deseados, y finalizar\u00e1 confirmando la matr\u00edcula en todas las asignaturas elegidas en el sistema.\nLos turnos para la matr\u00edcula, son asignados por grupos de acuerdo al promedio ponderado de los \u00faltimos ciclos, en un orden de m\u00e9rito. Cada alumno puede verificar su turno correspondiente dentro de la plataforma intranet-alumnos.\n\nCondiciones Para Matricula En Asignaturas\nCondiciones para la Matricula en Asignaturas\n\nArt. 49\u00b0 El estudiante se matricular\u00e1 s\u00f3lo en las asignaturas que corresponden a su Plan de Estudios de su especialidad. Quien haya solicitado matr\u00edcula en asignaturas de otra especialidad de la UNI, primero har\u00e1 su Matricula ordinaria y reservar\u00e1 cr\u00e9ditos para esas adicionales, las que se registrar\u00e1n mediante oficio ante la DIRCE.\n\nArt. 50\u00b0 La matr\u00edcula en una asignatura procede:\n\t\ta. Si el prerrequisito de la asignatura ha sido aprobado.\n\t\tb. Si se ha solicitado la matr\u00edcula en las asignaturas pendientes de menor ciclo y en riesgo acad\u00e9mico.\n\t\tc. Si no existen cruces entre los horarios de las asignaturas-secci\u00f3n, y de las sesiones si corresponde, registradas en la matr\u00edcula.\n\t\td. Si no existen cruces entre los horarios de pr\u00e1cticas o laboratorios de dos asignatura-secci\u00f3n. De manera excepcional, se aceptan los siguientes cruces de dos asignaturas:\n\t\t\t-\tHasta cuatro (04) horas de cruces de horarios de solo teor\u00eda con teor\u00eda de dos asignatura-secci\u00f3n, siendo las horas no necesariamente consecutivas.\n\t\t\t-\tHasta dos (02) horas de cruces de horario de teor\u00eda con horarios de pr\u00e1ctica o laboratorios, no necesariamente consecutivas.\n\t\t\t-\tHasta dos (02) horas de cruces de horarios de teor\u00eda con horarios de pr\u00e1ctica o laboratorios y hasta dos (02) horas de cruces de horarios de solo teor\u00eda con teor\u00eda, no necesariamente consecutivos.\n\nArt. 54\u00b0 El estudiante que haya aprobado los cinco (05) primeros ciclos de su Plan de Estudios o un n\u00famero de cr\u00e9ditos equivalente a estos, podr\u00e1 matricularse en las asignaturas electivas en las que cumplan con el prerrequisito.\n\t\tPuede considerarse como prerrequisito una determinada cantidad de cr\u00e9ditos aprobados acumulados.\n\nArt. 55\u00b0 El estudiante que haya aprobado el n\u00famero total de cr\u00e9ditos exigidos en el Plan de Estudios de su especialidad, ser\u00e1 considerado autom\u00e1ticamente en la condici\u00f3n de \"Curr\u00edculo completo\" y por ello, eximido de los efectos del Reglamento de Matricula. \n\nArt. 56\u00b0 El estudiante considerado \"Curr\u00edculo Completo\" o que haya tramitado su Constancia de Egresado, podr\u00e1 inscribirse como estudiante libre en cualquier asignatura, abonando los derechos correspondientes al de estudiante libre. A la aprobaci\u00f3n de dichas asignaturas se le podr\u00e1 otorgar un certificado de capacitaci\u00f3n expedido por la Facultad.\n\nEscuelas Profesionales de la Facultad de Ciencias de la UNI\n\nInformaci\u00f3n de Contacto:\nSeg\u00fan la escuela profesional (carrera universitaria), el correo de contacto es el siguiente:\n\nPara F\u00edsica, Qu\u00edmica o Ciencia de la Computaci\u00f3n: escuelas_fc1@uni.edu.pe\nPara Matem\u00e1ticas o Ingenier\u00eda F\u00edsica: escuelas_fc2@uni.edu.pe\n\nHorario de Atenci\u00f3n: De Lunes a Viernes de 8:30 a.m a 4:00 p.m\n\n\u00c1rea de Estad\u00edstica y Registros Acad\u00e9micos de la Facultad de Ciencias de la UNI\n\nInformaci\u00f3n de Contacto de la oficina de estad\u00edstica (AERA)\nE-mail: estadistica_fc@uni.edu.pe\n\nHorario de Atenci\u00f3n de la oficina de estad\u00edstica (AERA):\nDe Lunes a Viernes de 8:00 a.m. a 4:00 p.m.",
            },
            {
                "role": "assistant",
                "content": "Los estudiantes pueden matricularse en un curso y su prerequisito en el mismo ciclo \u00fanicamente si cumplen con la condici\u00f3n de ser \"estudiantes en posibilidad de egresar\", es decir, les faltan como m\u00e1ximo treinta (30) cr\u00e9ditos para completar su Plan de Estudios y graduarse. Deben comunicarse con su escuela profesional al menos 3 d\u00edas h\u00e1biles antes de las fechas de matr\u00edcula regular para solicitar esta inscripci\u00f3n especial, la cual ser\u00e1 evaluada y aprobada por el director de la escuela correspondiente.",
            }
        ]
history_chat = format_text_history_chat(history_chat_messages)

query = "\u00bfQu\u00e9 debo hacer si quiero inscribirme en un curso y su prerequisito en el mismo ciclo?"

prompt_identify_reform_v2 = f"""Dado el historial del chat proporcionado entre tres comillas invertidas y la última pregunta del usuario, indica si la pregunta puede entenderse en su totalidad sin necesidad del historial del chat. Sigue los siguientes criterios:
1. El mensaje no es totalmente entendible si es que hace referencia a informacion específica proporcionada previamente en la conversación pero no descrita en el mensaje
2. EL mensaje no es totalmente entendible cuanto hace referencia a algo mencionado anteriormente en la conversación y falta ese contexto.
3. El mensaje no es tatalmente entendible si contiene preguntas que pueden estar relacionadas con detalles o situaciones específicas que se discutieron antes y no se describen el mensaje.
4. El mensaje es totalmente entendible si es contiene toda la informacion de manera explicita para que tenga sentido sin necesidad del historial del chat.

Proporciona una breve justificacion e indica si la pregunta se entiende sin necesidad del historial del chat de la siguiente manera:
Justificacion: ...
La última pregunta del usuario se entiende sin necesidad del historial del chat: Sí o No

Historial del chat: ```{history_chat}```

Último mensaje del usuario: ```{query}```
"""

prompt_identify_reform = f"""Dado el historial del chat proporcionado entre tres comillas invertidas y la última pregunta del usuario, indica si la pregunta puede entenderse en su totalidad sin necesidad del historial del chat. Sigue los siguientes criterios:
1. El pregunta no es totalmente entendible sin el historial del chat, si es que hace referencia a informacion específica proporcionada previamente en la conversación que no es suficientemente descrita en el mensaje para poder entender completamente el contexto del mensaje.
2. EL pregunta no es totalmente entendible sin el historial del chat, cuanto hace referencia a algo mencionado anteriormente en la conversación y falta ese contexto.
3. La pregunta es totalmente comprensible sin necesidad del historial del chat si se refiere a una situación o información que no ha sido mencionada previamente en la conversación, pero se puede entender por sí sola.
4. La pregunta es totalmente entendible sin necesidad del historial del chat, si es que contiene toda la informacion de manera explicita haciendo que la pregunta tenga sentido y sea comprensible sin necesidad del historial del chat.


Proporciona una justificacion precisa e indica si la pregunta se entiende sin necesidad del historial del chat de la siguiente manera:
Justificacion: ...
La última pregunta del usuario se entiende sin necesidad del historial del chat: Sí o No

Historial del chat: ```{history_chat}```

Último mensaje del usuario: ```{query}```
"""

prompt_identify_reform2 = f"""Dado el historial del chat proporcionado entre tres comillas invertidas y la última pregunta del usuario, indica si la pregunta puede entenderse en su totalidad sin necesidad del historial del chat. Menciónalo de la siguiente manera: "La última pregunta del usuario se entiende sin necesidad del historial del chat: Sí" o "La última pregunta del usuario se entiende sin necesidad del historial del chat: No". Asegúrate de considerar si la pregunta hace referencia a información proporcionada anteriormente en la conversación, que sin el historial del chat no queria totalmente claro a que se refiere.

Historial del chat: ```{history_chat}```

Último mensaje del usuario: ```{query}```
"""

print("prompt_identify_reform:", prompt_identify_reform)

messages = [{"role": "user", "content": prompt_identify_reform}]
            
#messages = [{"role": "user", "content": prompt_identify_reform}, {"role": "assistant", "content": "La última pregunta del usuario se entiende sin necesidad del historial del chat: Sí"}, {"role": "user", "content": "esta respuesta esta mal"}]

response = get_completion_from_messages(
                    messages,
                    model= "gpt-3.5-turbo-0125")

print("\nresponde need context:", response)

